DISTCLEAN_TARGETS = apxs apachectl dbmmanage httpd.exp log_server_status \
	logresolve.pl phf_abuse_log.cgi split-logfile

PROGRAMS = htpasswd htdigest rotatelogs logresolve ab
TARGETS  = $(PROGRAMS)

PROGRAM_LDADD        = $(EXTRA_LDFLAGS) $(PROGRAM_DEPENDENCIES) $(EXTRA_LIBS)
PROGRAM_DEPENDENCIES = \
	../srclib/apr-util/libaprutil.la ../srclib/apr/libapr.la

include $(top_srcdir)/build/rules.mk

install:
	@test -d $(bindir) || $(MKINSTALLDIRS) $(bindir)
	@cp -p $(top_srcdir)/server/httpd.exp $(bindir)
	@cp -p apachectl $(bindir)
	chmod 755 $(bindir)/apachectl
	@if test -f $(builddir)/apxs; then \
	    cp -p apxs $(bindir); \
	    chmod 755 $(bindir)/apxs; \
	fi

htpasswd_OBJECTS = htpasswd.lo
htpasswd: $(htpasswd_OBJECTS)
	$(LINK) $(htpasswd_OBJECTS) $(PROGRAM_LDADD)

htdigest_OBJECTS = htdigest.lo
htdigest: $(htdigest_OBJECTS)
	$(LINK) $(htdigest_OBJECTS) $(PROGRAM_LDADD)

rotatelogs_OBJECTS = rotatelogs.lo
rotatelogs: $(rotatelogs_OBJECTS)
	$(LINK) $(rotatelogs_OBJECTS) $(PROGRAM_LDADD)

logresolve_OBJECTS = logresolve.lo
logresolve: $(logresolve_OBJECTS)
	$(LINK) $(logresolve_OBJECTS) $(PROGRAM_LDADD)

ab_OBJECTS = ab.lo
ab: $(ab_OBJECTS)
	$(LINK) $(ab_OBJECTS) $(PROGRAM_LDADD)

suexec_OBJECTS = suexec.lo
suexec: $(suexec_OBJECTS)
	$(LINK) $(suexec_OBJECTS) $(PROGRAM_LDADD)

